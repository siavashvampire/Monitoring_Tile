<div class="content">
    <div class="container-fluid">
        <div class="card">
            <div class="card-header card-header-info card-header-icon">
                <div class="card-icon" >
                    <i class="fa fa-file-excel-o fa-2x"></i>
                </div>
                <h4 class="card-title float-{$float} m-3">{_ "configuration"} {$item_label}</h4>
            </div>
            <div class="card-body">
                <form class="form-horizontal" method="post">
                    <div class="row">
                        <div class="col-md-4 float-right form-group">
                            <label for="label" class="col-form-label col-md-3 float-right">{_ "name"} {_ "design"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="text" class="form-control " required  id="label" name="label" value="{if isset($Mold.post.label)}{$Mold.post.label}{elseif isset($model)}{$model->getLabel()}{/if}">
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="color" class="col-form-label col-md-3 float-right">{_ "color"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="color" name="color" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "color"}">
                                    {foreach from=$colors key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.color)}{if $item.id == $Mold.post.color}selected{/if}{elseif isset($model) and $item.id == $model->getColor()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="exampleCode" class="col-form-label col-md-3 float-right">{_ "code"} {_ "example"} {_ "experiment"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="1" class="form-control" id="exampleCode" name="exampleCode" value="{if isset($Mold.post.exampleCode)}{$Mold.post.exampleCode}{elseif isset($model)}{$model->getExampleCode()}{/if}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="phase" class="col-form-label col-md-3 float-right">{_ "phase"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="phase" name="phase" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "phase"}">
                                    {foreach from=$phases key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.phase)}{if $item.id == $Mold.post.phase }selected{/if}{elseif isset($model) and $item.id == $model->getPhase()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="size" class="col-form-label col-md-3 float-right">{_ "size"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="size" name="size" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "size"}">
                                    {foreach from=$sizes key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.size)}{if $item.id == $Mold.post.size }selected{/if}{elseif isset($model) and $item.id == $model->getSize()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="template" class="col-form-label col-md-3 float-right">{_ "template"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="template" name="template" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "template"}">
                                    {foreach from=$templates key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.template)}{if $item.id == $Mold.post.template }selected{/if}{elseif isset($model) and $item.id == $model->getTemplate()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="phase" class="col-form-label col-md-3 float-right">{_ "kind"} {_ "product"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="kind" name="kind" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "kind"}">
                                    {foreach from=$kinds key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.kind)}{if $item.id == $Mold.post.kind }selected{/if}{elseif isset($model) and $item.id == $model->getKind()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="phase" class="col-form-label col-md-3 float-right">{_ "technique"} {_ "production"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" id="technique" name="technique" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "technique"}">
                                    {foreach from=$techniques key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.technique)}{if $item.id == $Mold.post.technique }selected{/if}{elseif isset($model) and $item.id == $model->getTechnique()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="glazeParent" class="col-form-label col-md-3 float-right">{_ "glaze"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" onchange="getItem('product/glazeByParent/'+$(this).find(':selected').val(),'#glaze',0);" required id="glazeParent" name="glazeParent" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "glaze"}">
                                    {foreach from=$glazeParents key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.glazeParent)}{if $item.id == $Mold.post.glazeParent }selected{/if}{elseif isset($model) and $item.id == $model->getGlazeParent()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="phase" class="col-form-label col-md-3 float-right">{_ "effect"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="effect" name="effect" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "effect"}">
                                    {foreach from=$effects key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.effect)}{if $item.id == $Mold.post.effect }selected{/if}{elseif isset($model) and $item.id == $model->getEffect()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="phase" class="col-form-label col-md-3 float-right">{_ "decor"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" id="decor" name="decor" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "decor"}">
                                    {foreach from=$decors key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.decor)}{if $item.id == $Mold.post.decor }selected{/if}{elseif isset($model) and $item.id == $model->getDecor()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="production_design_code" class="col-form-label col-md-3 float-right">{_ "code"} {_ "design"} {_ "production"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="1" class="form-control" required id="production_design_code" name="production_design_code" value="{if isset($Mold.post.production_design_code)}{$Mold.post.production_design_code}{elseif isset($model)}{$model->getProductionDesignCode()}{/if}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="body" class="col-form-label col-md-3 float-right">{_ "code"} {_ "body"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker" required id="body" name="body" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "body"}">
                                    {foreach from=$bodys key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.body)}{if $item.id == $Mold.post.body}selected{/if}{elseif isset($model) and $item.id == $model->getBody()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="body_weight" class="col-form-label col-md-3 float-right">{_ "weight"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="0" class="form-control" required id="body_weight" name="body_weight" value="{if isset($Mold.post.body_weight)}{$Mold.post.body_weight}{elseif isset($model)}{$model->getBodyWeight()}{else}0{/if}" style="text-align: center">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="engobe" class="col-form-label col-md-3 float-right">{_ "code"} {_ "engobe"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="engobe" name="engobe" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "engobe"}">
                                    {foreach from=$engobes key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.engobe)}{if $item.id == $Mold.post.engobe}selected{/if}{elseif isset($model) and $item.id == $model->getEngobe()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="engobe_weight" class="col-form-label col-md-3 float-right">{_ "weight"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="0" class="form-control" required id="engobe_weight" name="engobe_weight" value="{if isset($Mold.post.engobe_weight)}{$Mold.post.engobe_weight}{elseif isset($model)}{$model->getEngobeWeight()}{else}0{/if}" style="text-align: center">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="glaze" class="col-form-label col-md-3 float-right">{_ "code"} {_ "glaze"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" required id="glaze" name="glaze" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "glaze"}">
                                    {foreach from=$glazes key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.glaze)}{if $item.id == $Mold.post.glaze}selected{/if}{elseif isset($model) and $item.id == $model->getGlaze()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4 form-group">
                            <label for="glaze_weight" class="col-form-label col-md-3 float-right">{_ "weight"}:<span class="text-danger">*</span></label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="0" class="form-control" required id="glaze_weight" name="glaze_weight" value="{if isset($Mold.post.glaze_weight)}{$Mold.post.glaze_weight}{elseif isset($model)}{$model->getGlazeWeight()}{else}0{/if}" style="text-align: center">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="glaze" class="col-form-label col-md-3 float-right">{_ "complementary_printing_before_digital"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh" id="complementary_printing_before_digital" name="complementary_printing_before_digital" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "complementary_printing"}">
                                    {foreach from=$complementary_printing_before_digital key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.complementary_printing_before_digital)}{if $item.id == $Mold.post.complementary_printing_before_digital}selected{/if}{elseif isset($model) and $item.id == $model->getComplementaryPrintingBeforeDigital()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label for="glaze_weight" class="col-form-label col-md-3 float-right">{_ "weight"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="0" class="form-control" id="complementary_printing_before_digital_weight" name="complementary_printing_before_digital_weight" value="{if isset($Mold.post.complementary_printing_before_digital_weight)}{$Mold.post.complementary_printing_before_digital_weight}{elseif isset($model)}{$model->getComplementaryPrintingBeforeDigitalWeight()}{else}0{/if}" style="text-align: center">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label for="glaze" class="col-form-label col-md-3 float-right">{_ "cylinder"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh"  name="cylinder_before" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "cylinder"}">
                                    {foreach from=$cylinder key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.cylinder_before)}{if $item.id == $Mold.post.cylinder_before}selected{/if}{elseif isset($model) and $item.id == $model->getCylinderBefore()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label for="glaze" class="col-form-label col-md-3 float-right">{_ "complementary_printing_after_digital"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh"  id="complementary_printing_after_digital" name="complementary_printing_after_digital" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "complementary_printing"}">
                                    {foreach from=$complementary_printing_after_digital key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.complementary_printing_after_digital)}{if $item.id == $Mold.post.complementary_printing_after_digital}selected{/if}{elseif isset($model) and $item.id == $model->getComplementaryPrintingAfterDigital()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label for="glaze_weight" class="col-form-label col-md-3 float-right">{_ "weight"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <input type="number" min="0" class="form-control" id="complementary_printing_after_digital_weight" name="complementary_printing_after_digital_weight" value="{if isset($Mold.post.complementary_printing_after_digital_weight)}{$Mold.post.complementary_printing_after_digital_weight}{elseif isset($model)}{$model->getComplementaryPrintingAfterDigitalWeight()}{else}0{/if}" style="text-align: center">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label for="glaze" class="col-form-label col-md-3 float-right">{_ "cylinder"}:</label>
                            <div class="col-md-9">
                                <div class="form-group has-default">
                                    <select class="selectpicker selectpickerNotRefresh selectPickerShouldRefresh"  name="cylinder_after" data-live-search="true" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="{_ "cylinder"}">
                                    {foreach from=$cylinder key=key value=item }
                                    <option value="{$item.id}" {if isset($Mold.post.cylinder_after)}{if $item.id == $Mold.post.cylinder_after}selected{/if}{elseif isset($model) and $item.id == $model->getCylinderAfter()}selected{/if} >{$item.label}</option>
                                    {/foreach}
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-8 form-group">
                            <div class="col-md-4" style="display: flex;align-items: center;height: 100%;">
                                <label class="float-right">{_ "print"} {_ "digital"}:<span class="text-danger">*</span></label>
                            </div>
                            <div class="col-md-8">
                                <table class="table text-{$text_align}" style="border-collapse:collapse;width: 100%;margin: unset !important;">
                                    <thead style="">
                                    <tr>
                                        <th style="width: 50%;border: 2px solid darkcyan;padding: 8px;font-size: 16px;font-weight: bold;">{_ "color"} {_ "print"}</th>
                                        <th style="width: 50%;border: 2px solid darkcyan;padding: 8px;font-size: 16px;font-weight: bold;">{_ "weight"} {_ "ink"}</th>
                                    </tr>
                                    </thead>
                                    <tbody style="border-bottom: 2px solid darkcyan;">
                                    {foreach from=$digitalPrint_colors key=key value=item }
                                    <tr>
                                        <td style="border: 1px solid darkcyan;border-right: 2px solid darkcyan;padding: 8px;text-align: center;">
                                            <label style="font-size: 14px;color:gray;" for="digitalPrint_color_{$key}">
                                                {_ "color"} {$item.label}
                                            </label>
                                        </td>
                                        <td style="border: 1px solid darkcyan;border-left: 2px solid darkcyan;padding: 8px;text-align: center;">
                                            <input type="number" min="0" step=".01" class="form-control" required id="digitalPrint_color_{$key}" name="digitalPrint_color[]" value="{$item.value}" style="text-align: center">
                                        </td>
                                    </tr>
                                    {/foreach}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-8 form-group">
                            <div class="col-md-4" style="display: flex;align-items: center;height: 100%;">
                                <label class="float-right">{_ "degree"}:<span class="text-danger">*</span></label>
                            </div>
                            <div class="col-md-8">
                                <table class="table text-{$text_align}" style="border-collapse:collapse;width: 100%;margin: unset !important;">
                                    <thead style="">
                                    <tr>
                                        <th style="width: 50%;border: 2px solid darkcyan;padding: 8px;font-size: 16px;font-weight: bold;">{_ "anticipation"} {_ "degree"}</th>
                                        <th style="width: 50%;border: 2px solid darkcyan;padding: 8px;font-size: 16px;font-weight: bold;">{_ "Percent"} {_ "suggested"}</th>
                                    </tr>
                                    </thead>
                                    <tbody style="border-bottom: 2px solid darkcyan;">
                                    {foreach from=$degrees key=key value=item }
                                    <tr>
                                        <td style="border: 1px solid darkcyan;border-right: 2px solid darkcyan;padding: 8px;text-align: center;">
                                            <label style="font-size: 14px;color:gray;" for="degree_{$key}">
                                                {_ "degree"} {$item.label}
                                            </label>
                                        </td>
                                        <td style="border: 1px solid darkcyan;border-left: 2px solid darkcyan;padding: 8px;text-align: center;">
                                            <input type="number" min="0" step=".01" class="form-control" required id="degree_{$key}" name="degree[]" value="{$item.value}" style="text-align: center">
                                        </td>
                                    </tr>
                                    {/foreach}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-12">
                            <button type="submit" class="btn btn-fill btn-info"><i class="fa fa-download"></i>{_ "insert"}</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{map navBarButton}
{if $editAccess == 'true'}
<a class="btn btn-info"  href="{url admin}{$ChangeURL}">
                                      <span class="btn-label">
                                        <i class="fa fa-plus"></i>
                                      </span>
    {_ "backTo"} {_ "list"} {$item_label}
</a>
{/if}
{/map}

{map footerjs}
<script>
    let urlapi = '{url api}' ;
    function getItem(url,select_name,selected_id){
        $.ajax({
            url: urlapi+url,
            type: 'post',
            dataType: 'json',
            data: {
            } ,
            success: function (result) {
                let select = $(select_name);

                select.html("");
                if(result !== true) {
                    result.forEach(function (_ref) {
                        let selected = "";
                        if (_ref['id'] ===  selected_id) {
                            selected = "selected" ;
                        }
                        select.append('<option value="'+_ref['id']+'" '+selected+' >'+_ref['label']+'</option>');
                        $(select_name).selectpicker('refresh');
                    });
                    select.addClass('temp_'+ tempi);
                    $('temp_'+ tempi).selectpicker('refresh');

                }else{
                    select.append('<option value="' + 0 + '" ' + ' >' + 'موردی ثبت نشده' + '</option>');
                }
                //$(select_name).selectpicker('refresh');
                $( 'temp_'+ tempi).selectpicker('refresh');
                tempi = tempi + 1 ;
                setTimeout(function(){ $( 'temp_'+ tempi).selectpicker('refresh');}, 3000);
            }
        });
    }

    // getItem('product/body','#body',body_select);
    // getItem('product/engobe','#engobe',engobe_select);
    // getItem('product/glazeGroupList/'+glaze_select,'#glaze',glaze_select);
</script>
{/map}