<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div id="resultOfThisForm">
                        <div class="alert alert-success alert-with-icon" id="resultOfThisFormSuccess" style="display: none;" data-notify="container">
                            <span  class="text-{$text_align}"  id="resultOfThisFormSuccessText"></span>
                        </div>
                        <div class="alert alert-danger alert-with-icon" id="resultOfThisFormDanger" style="display: none;" data-notify="container">
                            <span  class="text-{$text_align}"  id="resultOfThisFormDangerText"></span>
                        </div>
                    </div>
                    <div class="card-header card-header-info card-header-icon">
                        <div class="card-icon" >
                            <i class="fa fa-file-excel-o fa-2x"></i>
                        </div>
                        <h4 class="card-title float-{$float} m-3">{_ "acceptance"} {_ "va"} {_ "payment"} {_ "customer"}</h4>
                    </div>
                    <div class="card-body">
                        <form class="form-horizontal" method="post" id="newSubstation" onsubmit="return ajaxThisForm('#newSubstation' ,'#resultOfThisForm' , true , true , 'reloadTableData');">
                            <div class="row" style="border: 1px solid darkcyan;">
                                <div class="col-md-3">
                                    <label class="col-md-6 col-form-label">{_ "number"} {_ "receipt"} : {$model.id}</label>
                                </div>
                                <div class="col-md-3">
                                    <label class="col-md-3 col-form-label">{_ "date"} </label>
                                    <div class="col-md-9">
                                        <div class="form-group has-default">
                                            <input type="date" autocomplete="off" required name="Time_Send" class="form-control" value="{if isset($Mold.post.Time_Send_justT)}{$Mold.post.Time_Send_justT}{elseif isset($requestService)}{$requestService->getJTimeSend()}{/if}">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <label class="col-md-3 col-form-label">{_ "time"}</label>
                                    <div class="col-md-9">
                                        <div class="form-group has-default">
                                            <input type="date" autocomplete="off" required name="Time_Send_justT" data-onlyTime="1"  class="form-control" value="{if isset($Mold.post.Time_Send_justT)}{$Mold.post.Time_Send_justT}{elseif isset($requestService)}{$requestService->getTimeSend()|jDate:"H&#58;i"}{/if}">
                                        </div>
                                    </div>

                                </div>

                                <div class="col-md-3">
                                    <label class="col-md-9 col-form-label">{_ "user"} : {$user.fname} {$user.lname} </label>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <label class="col-md-3 col-form-label">{_ "name"} {_ "customer"} <span class="text-danger">*</span> </label>
                                    <div class="col-md-9 text-right">
                                        <div class="form-group has-default">
                                            <select class="selectpicker" required name="customer" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="مشتری">
                                                {foreach from=$customers key=key value=item }
                                                <option value="{$item.id}"  {if isset($Mold.post.customer)}{if $item.id == $Mold.post.customer }selected{/if}{elseif isset($model) and  $item.id == $model->getCustomer() }selected{/if}>{$item.name}</option>
                                                {/foreach}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="col-md-3 col-form-label">{_ "account_status"}</label>
                                    <div class="col-md-9">
                                        <div class="form-group has-default">
                                            <textarea rows="1" autocomplete="off"  name="account_status" class="form-control text-center">{if isset($Mold.post.account_status)}{$Mold.post.account_status}{elseif isset($model)}{$model->getAccountStatus()}{/if}</textarea>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="col-md-3 col-form-label">{_ "amount"} <span class="text-danger">*</span> </label>
                                    <div class="col-md-9">
                                        <div class="form-group has-default">
                                            <textarea rows="1" autocomplete="off"  name="amount" required class="form-control text-center">{if isset($Mold.post.amount)}{$Mold.post.amount}{elseif isset($model)}{$model->getAmount()}{/if}</textarea>
                                        </div>
                                    </div>

                                </div>


                                <div class="col-md-6 form-group">
                                    <label class="col-md-3 col-form-label">{_ "operation_type"} <span class="text-danger">*</span> </label>
                                    <div class="col-md-9 text-right">
                                        <div class="form-group has-default">
                                            <select class="selectpicker selectpickerNotRefresh" required name="operation_type" data-style="btn btn-outline-info btn-round text-{$float}" title="نوع عملیات">
                                                {foreach from=$operation_type key=key value=item }
                                                <option value="{$item.id}"  {if isset($Mold.post.operation_type)}{if $item.id == $Mold.post.operation_type }selected{/if}{elseif isset($model) and  $item.id == $model->getOperationType() }selected{/if}>{$item.label}</option>
                                                {/foreach}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <label class="col-md-1 col-form-label">{_ "description"}</label>
                                    <div class="col-md-11">
                                        <div class="form-group has-default">
                                            <textarea rows="1" autocomplete="off"  name="description" class="form-control text-center">{if isset($Mold.post.description)}{$Mold.post.description}{elseif isset($model)}{$model->getDescription()}{/if}</textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <label class="col-md-1 col-form-label">{_ "payment_method"} <span class="text-danger">*</span> </label>
                                    <div class="col-md-11 text-right">
                                        <div class="form-group has-default">
                                            <select class="selectpicker" required name="payment_method" data-size="7" data-style="btn btn-outline-info btn-round text-{$float}" title="نوع پراخت">
                                                {foreach from=$payment_method key=key value=item }
                                                <option value="{$item.id}"  {if isset($Mold.post.payment_method)}{if $item.id == $Mold.post.payment_method }selected{/if}{elseif isset($model) and  $item.id == $model->getPaymentMethod() }selected{/if}>{$item.label}</option>
                                                {/foreach}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-12">
                                    <button type="submit" class="btn btn-fill btn-info"><i class="fa fa-download"></i> {_ "insert"} {_ "information"}</button>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

{map navBarButton}
<a class="btn btn-info"  href="{url admin}payment/List">
                      <span class="btn-label">
                        <i class="fa fa-plus"></i>
                      </span>
    {_ "backTo"} {_ "list"} {_ "payment"}
</a>
{/map}

{map footerjs}

<script>
    var urlc = '{url current}' ;
    var urlApi = '{url api}' ;
    var oneRowTruck ='<tr>'+ $('#bodyTruckElemnt').html()+"</tr>";
    $('#bodyTruckElemnt').remove();
    function  refreshPageJs() {
        $('.selectpicker:not(.selectpickerNotRefresh)').selectpicker('refresh');
    }
    function  updateTruckDetail(obj,id) {
        let closestTr    = obj.closest('tr');
        let WeightLabel  = closestTr.children[2].children[0].children[0];
        let NumberLabel0 = closestTr.children[1].children[0].children[0].children[0].children[0];
        let NumberLabel1 = closestTr.children[1].children[0].children[1].children[0].children[0];
        let NumberLabel2 = closestTr.children[1].children[0].children[2].children[0].children[0];
        let NumberLabel3 = closestTr.children[1].children[0].children[3].children[0].children[0];
        $.ajax({
            url: urlApi+'getWeighbridge/Trucks',
            type: 'post',
            dataType: 'json',
            data: {
                'id': id,
            },
            success: function (result) {
                WeightLabel.innerHTML = result[0]['Weight'];
                NumberLabel0.innerHTML = result[0]['mainNumberPlate'];
                NumberLabel1.innerHTML = result[0]['Number1Plate'];
                NumberLabel2.innerHTML = result[0]['CharNumberPlate'];
                NumberLabel3.innerHTML = result[0]['Number2Plate'];
            },
            error: function (jqXHR, exception) {
            },
        });
    }
</script>
{/map}